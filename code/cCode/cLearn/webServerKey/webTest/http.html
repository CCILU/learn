<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="UTF-8">
<title>alert()</title>
</head>
<body>
<script>
	function KeyLogInWithVerifyUserPin(param1)
	{//eg:KeyLogInWithVerifyUserPin('111111')
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
		str='{\"func\":\"KeyLogInWithVerifyUserPin\",\"KeyPin\":\"'+param1+'\"'+'}';
		str="json="+str;
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {
				_xmlhttp = new XMLHttpRequest();
			} else {
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}				
	}
	function SignMessageWithEccKeyAndWithoutSm3(param1,param2)
	{//eg:SignMessageWithEccKeyAndWithoutSm3('12345678123456781234567812345678',32)
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
				
		str='{\"func\":\"SignMessageWithEccKeyAndWithoutSm3\",\"pbData\":\"'+param1+'\",\"ulDataLen\":'+param2+'}';			
		str="json="+str;
		
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {
				_xmlhttp = new XMLHttpRequest();
			} else {
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}//j1R+DLFHpxtQnTY+dzAhPHpy7woOpXXjp8vgaO+97aJhK0ANpma4fttt9++JyqGACOVYPeom5waf16rZuLp5Eg==				
	}
	function SignMessageWithEccKeyAndWithSm3NoPid(param1,param2)
	{//eg:SignMessageWithEccKeyAndWithSm3NoPid('1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678',256)
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
				
		str='{\"func\":\"SignMessageWithEccKeyAndWithSm3NoPid\",\"pbData\":\"'+param1+'\",\"ulDataLen\":'+param2+'}';			
		str="json="+str;
		
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {
				_xmlhttp = new XMLHttpRequest();
			} else {
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}//m6t3WNmZGnO1nTODct3+LIdC5oxB9Uqzwg+qux2NQfAOq2gnkyb6dFOdBGHPT05I86ryZrR23oSXsZ7ANS/aEQ==				
	}
	function GetECCPublicKey(param1)//1:签名 0：加密
	{//eg:GetECCPublicKey(1)/GetECCPublicKey(0)
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
		
		str='{\"func\":\"GetECCPublicKey\",\"bSignFlag\":'+param1+'}';				
		str="json="+str;
		
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {
				_xmlhttp = new XMLHttpRequest();
			} else {
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}//QV1tavYYx7SwUypEmCIon/pTfLQHK4Cpdor3a/jG9Fad2lPDiUAoZD4jcbREdDJkoMmKTWbeX0Zea1UKiEYkOg==			
	}
	function SignMessageVerifyWithoutSm3(param1,param2,param3,param4)
	{//eg:SignMessageVerifyWithoutSm3('QV1tavYYx7SwUypEmCIon/pTfLQHK4Cpdor3a/jG9Fad2lPDiUAoZD4jcbREdDJkoMmKTWbeX0Zea1UKiEYkOg==', '12345678123456781234567812345678', 32, 'j1R+DLFHpxtQnTY+dzAhPHpy7woOpXXjp8vgaO+97aJhK0ANpma4fttt9++JyqGACOVYPeom5waf16rZuLp5Eg==')
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
		
		str='{\"func\":\"SignMessageVerifyWithoutSm3\",\"ECCPubKey\":\"'+param1+'\",\"pbData\":\"'+param2+'\"'+',\"ulDataLen\":'+param3+',\"Signature\":\"'+param4+'\"}';				
		str="json="+str;
		
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
				_xmlhttp = new XMLHttpRequest();
			} else {// code for IE6, IE5
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}			
	}
	function SignMessageVerifyWithSm3NoPid(param1,param2,param3,param4)
	{//eg:SignMessageVerifyWithSm3NoPid('QV1tavYYx7SwUypEmCIon/pTfLQHK4Cpdor3a/jG9Fad2lPDiUAoZD4jcbREdDJkoMmKTWbeX0Zea1UKiEYkOg==', '1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678', 256, 'j1R+DLFHpxtQnTY+dzAhPHpy7woOpXXjp8vgaO+97aJhK0ANpma4fttt9++JyqGACOVYPeom5waf16rZuLp5Eg==')
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
		
		str='{\"func\":\"SignMessageVerifyWithSm3NoPid\",\"ECCPubKey\":\"'+param1+'\",\"pbData\":\"'+param2+'\"'+',\"ulDataLen\":'+param3+',\"Signature\":\"'+param4+'\"}';				
		str="json="+str;
		
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
				_xmlhttp = new XMLHttpRequest();
			} else {// code for IE6, IE5
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}			
	}
	function GetCertificate(param1)//1:签名 0：加密
	{//eg:GetCertificate(1)/GetCertificate(0)
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
		
		str='{\"func\":\"GetCertificate\",\"bSignFlag\":'+param1+'}';				
		str="json="+str;
		
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {
				_xmlhttp = new XMLHttpRequest();
			} else {
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}//QV1tavYYx7SwUypEmCIon/pTfLQHK4Cpdor3a/jG9Fad2lPDiUAoZD4jcbREdDJkoMmKTWbeX0Zea1UKiEYkOg==			
	}
	//
	function SetSessionKeyAndMessageEncrypt(param1,param2,param3)//param2最大传入数据长度为512
	{//eg:SetSessionKeyAndMessageEncrypt('QV1tavYYx7SwUypEmCIon/pTfLQHK4Cpdor3a/jG9Fad2lPDiUAoZD4jcbREdDJkoMmKTWbeX0Zea1UKiEYkOg==', '1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678', 256, 'j1R+DLFHpxtQnTY+dzAhPHpy7woOpXXjp8vgaO+97aJhK0ANpma4fttt9++JyqGACOVYPeom5waf16rZuLp5Eg==')
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
		
		str='{\"func\":\"SetSessionKeyAndMessageEncrypt\",\"SessionKey\":\"'+param1+'\",\"pbData\":\"'+param2+'\"'+',\"ulDataLen\":'+param3+'}';				
		str="json="+str;
		
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
				_xmlhttp = new XMLHttpRequest();
			} else {// code for IE6, IE5
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}			
	}
	function SetSessionKeyAndMessageDecrypt(param1,param2,param3)//param2最大传入数据长度为700
	{//eg:SetSessionKeyAndMessageEncrypt('QV1tavYYx7SwUypEmCIon/pTfLQHK4Cpdor3a/jG9Fad2lPDiUAoZD4jcbREdDJkoMmKTWbeX0Zea1UKiEYkOg==', '1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678', 256, 'j1R+DLFHpxtQnTY+dzAhPHpy7woOpXXjp8vgaO+97aJhK0ANpma4fttt9++JyqGACOVYPeom5waf16rZuLp5Eg==')
		var _xmlhttp ;
		var _url = "http://127.0.0.1:51234";
		var temp;
		var str;
		
		str='{\"func\":\"SetSessionKeyAndMessageDecrypt\",\"SessionKey\":\"'+param1+'\",\"pbData\":\"'+param2+'\"'+',\"ulDataLen\":'+param3+'}';				
		str="json="+str;
		
		if(_xmlhttp == null) {
			if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
				_xmlhttp = new XMLHttpRequest();
			} else {// code for IE6, IE5
				_xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		_xmlhttp.open("POST", _url, false);
		_xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	
		_xmlhttp.send(str);
		
		if(_xmlhttp.readyState == 4 && _xmlhttp.status == 200) {
			var obj = eval("(" + _xmlhttp.responseText + ")");
			console.log("obj: "+obj.data);				
			var tmp = encodeURI(obj.data);
			alert('obj.data: '+tmp);
			return tmp;
		}
		else
		{
			console.log("error");
			return null;
		}			
	}
</script>	
test:
<input type="button" value="KeyLogInWithVerifyUserPin" onclick="KeyLogInWithVerifyUserPin('111111')"/>
<input type="button" value="SignMessageWithEccKeyAndWithoutSm3" onclick="SignMessageWithEccKeyAndWithoutSm3('12345678123456781234567812345678',32)"/>
<input type="button" value="SignMessageWithEccKeyAndWithSm3NoPid" onclick="SignMessageWithEccKeyAndWithSm3NoPid('1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678',256)"/>
<input type="button" value="GetECCPublicKey" onclick="GetECCPublicKey(1)"/>
<input type="button" value="GetCertificate" onclick="GetCertificate(1)"/>
<input type="button" value="SignMessageVerifyWithoutSm3" onclick="SignMessageVerifyWithoutSm3('QV1tavYYx7SwUypEmCIon/pTfLQHK4Cpdor3a/jG9Fad2lPDiUAoZD4jcbREdDJkoMmKTWbeX0Zea1UKiEYkOg==', '12345678123456781234567812345678', 32, 'j1R+DLFHpxtQnTY+dzAhPHpy7woOpXXjp8vgaO+97aJhK0ANpma4fttt9++JyqGACOVYPeom5waf16rZuLp5Eg==')"/>
<input type="button" value="SignMessageVerifyWithSm3NoPid" onclick="SignMessageVerifyWithSm3NoPid('QV1tavYYx7SwUypEmCIon/pTfLQHK4Cpdor3a/jG9Fad2lPDiUAoZD4jcbREdDJkoMmKTWbeX0Zea1UKiEYkOg==', '1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678', 256, 'm6t3WNmZGnO1nTODct3+LIdC5oxB9Uqzwg+qux2NQfAOq2gnkyb6dFOdBGHPT05I86ryZrR23oSXsZ7ANS/aEQ==')"/>
<input type="button" value="SetSessionKeyAndMessageEncrypt" onclick="SetSessionKeyAndMessageEncrypt('1111111111111111', '1234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678123456781234567812345678',256)"/>
<input type="button" value="SetSessionKeyAndMessageDecrypt" onclick="SetSessionKeyAndMessageDecrypt('1111111111111111', 'IkbwZPsOAmv7rzAr3HptESJG8GT7DgJr+68wK9x6bREiRvBk+w4Ca/uvMCvcem0RIkbwZPsOAmv7rzAr3HptESJG8GT7DgJr+68wK9x6bREiRvBk+w4Ca/uvMCvcem0RIkbwZPsOAmv7rzAr3HptESJG8GT7DgJr+68wK9x6bREiRvBk+w4Ca/uvMCvcem0RIkbwZPsOAmv7rzAr3HptESJG8GT7DgJr+68wK9x6bREiRvBk+w4Ca/uvMCvcem0RIkbwZPsOAmv7rzAr3HptESJG8GT7DgJr+68wK9x6bREiRvBk+w4Ca/uvMCvcem0RIkbwZPsOAmv7rzAr3HptEQ==',344)"/>
</body>
</html>

	
	
	
	
